
@{
    ViewData["Title"] = "Analisis";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<style>
    .user-icon-container {
        display: flex;
        align-items: center;
        margin-left: 30px;
    }

        .user-icon-container .icon-tabler {
            margin-right: 10px;
            width: 50px;
            height: 50px;
        }

        .user-icon-container .page-title {
            margin-left: -4px;
            color: #a79a66;
        }

        .user-icon-container .page-title-home {
            margin-left: -4px;
            color: #a79a66;
        }

    .page-title-home {
        margin-top: 18px;
    }

</style>

@section PagePreTitle {


    <div class="col">
        <!-- Page pre-title -->
        <div class="user-icon-container">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-analyze" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#A79A66" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M20 11a8.1 8.1 0 0 0 -6.986 -6.918a8.095 8.095 0 0 0 -8.019 3.918" />
                <path d="M4 13a8.1 8.1 0 0 0 15 3" />
                <path d="M19 16m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
                <path d="M5 8m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
                <path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
            </svg>
            <h2 class="page-title-home">
                Análisis/Resultados
            </h2>
        </div>
    </div>

}

@section PageActions {
    

}

@(Html.DevExtreme().DataGrid<LBW.Models.Entity.Muestra>()
    .ID("gridContainer")
    .DataSource(ds => ds.Mvc()
        .Controller("Muestras")
        .LoadAction("GetMuestrasRec")
        .Key("IdSample")

    )
    .ShowBorders(true)
    .RemoteOperations(true)


    .Columns(columns =>
    {

        columns.AddFor(m => m.IdSample).Caption("").Width(40)
            .CellTemplate(@<text>
    <svg id="Capa_1" data-name="Capa 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 170.85 222.32" width="20" height="20">
        <defs>
            <style>
                .cls-1, .cls-2 {
                    fill: #fff;
                    stroke: #a1acb9;
                    stroke-width: 5px;
                }

                .cls-2 {
                    fill-opacity: 0;
                }</style>
        </defs>
        <g id="iKFDj0kg9Z7rAJNhnUljb"><path class="cls-1" d="M55.42,64.62s-47.28,104.7-50,110.2-5,18.8,0,30,20,15,20,15h120s15-3.8,20-15,2.72-24.5,0-30c-2.52-5.5-49.81-110.2-49.81-110.2" transform="translate(0.06 0)" /></g>
        <g id="XN8UZQ70T0RvsJ5VMa4Kb"><path class="cls-2" d="M55.47,66.24V29.54" transform="translate(0.06 0)" /></g>
        <g id="NRt2ceM2nUSDG_63RTn7p" data-name="NRt2ceM2nUSDG 63RTn7p"><path class="cls-2" d="M59.47,12.5h-14c-1.2,0-2-1-2-4" transform="translate(0.06 0)" /></g>
        <g id="s8SYpRxWPAIU3cJdedely"><path class="cls-2" d="M127.47,6.5c0-1.3-.1-4-2-4h-80c-1.2,0-2,1-2,4" transform="translate(0.06 0)" /></g>
        <g id="jr_bdNPwxVP1tR-x2jqCO" data-name="jr bdNPwxVP1tR-x2jqCO"><path class="cls-2" d="M111.47,12.5h14c1.2,0,2-1,2-4" transform="translate(0.06 0)" /></g>
        <g id="R4Pa0_qX7JfWipx57qbDI" data-name="R4Pa0 qX7JfWipx57qbDI"><path class="cls-2" d="M43.47,6v3.2" transform="translate(0.06 0)" /></g>
        <g id="dlFIQRIEBrFAhFefXz443"><path class="cls-2" d="M127.47,5.75v3.4" transform="translate(0.06 0)" /></g>
        <g id="P_XejN-1qaYsxss16zLwI" data-name="P XejN-1qaYsxss16zLwI"><path class="cls-2" d="M115.47,66.13V30.43" transform="translate(0.06 0)" /></g>
        <g id="lTDpCcKC40D5A8sL1xawP"><path class="cls-2" d="M57.47,12.5h56" transform="translate(0.06 0)" /></g>
        <g id="T608tfJHVr4WVAKU9iJc1"><path class="cls-2" d="M59,28.93H45c-1.2,0-2-1-2-4" transform="translate(0.06 0)" /></g>
        <g id="i2taEIgYasyF9QUqWHkoE"><path class="cls-2" d="M127,22.93c0-1.3-.1-4-2-4H45c-1.2,0-2,1-2,4" transform="translate(0.06 0)" /></g>
        <g id="NmFf8K6tpBGHJF2c_Ciq_" data-name="NmFf8K6tpBGHJF2c Ciq "><path class="cls-2" d="M111,28.93h14c1.2,0,2-1,2-4" transform="translate(0.06 0)" /></g>
        <g id="uddyYndm51nNd3PysMtf1"><path class="cls-2" d="M43,22.38v3.2" transform="translate(0.06 0)" /></g>
        <g id="neZDGihypJmerEl_uYifO" data-name="neZDGihypJmerEl uYifO"><path class="cls-2" d="M48,12.36v5.3" transform="translate(0.06 0)" /></g>
        <g id="s_8OH4jhcNKJd47vSWA8A" data-name="s 8OH4jhcNKJd47vSWA8A"><path class="cls-2" d="M121.47,13.53v5.3" transform="translate(0.06 0)" /></g>
        <g id="DCAivGtc0hmVc-qZseLuG"><path class="cls-2" d="M127,22.19v3.4" transform="translate(0.06 0)" /></g>
        <g id="QSyN0JoNGEdJp41vkXrTn"><path class="cls-2" d="M57,28.93h56" transform="translate(0.06 0)" /></g>
    </svg>
            </text>
            );
        columns.AddFor(m => m.TextID).Caption("Muestra");
        columns.AddFor(m => m.LoginDate).Caption("Fecha")
        .Format("yyyy-MM-dd")
        .SortOrder(SortOrder.Desc);
        columns.AddFor(m => m.IdProject)
                       .Lookup(lookup => lookup
                       .DataSource(ds => ds.WebApi().Controller("Muestras").LoadAction("ProyectosLookup").Key("Value"))
                       .ValueExpr("Value")
                       .DisplayExpr("Text")).GroupIndex(0).Caption("Proyecto").SortOrder(SortOrder.Desc);

    })
      .FilterRow(f => f.Visible(true))
      .MasterDetail(detail =>
      {
          detail.Enabled(true);
          detail.Template(@<text>
    @(Html.DevExtreme().DataGrid<LBW.Models.Entity.Resultado>()
    .DataSource(ds => ds.Mvc()
    .Controller("Resultadoes")
    .LoadAction("GetIdSample")
    .UpdateAction("Put")
    .LoadParams(new { id = new JS("data.IdSample") })
    .Key("IdResult")
    )
    .RemoteOperations(true)
    .Columns(columns => {

  
    columns.AddFor(m => m.IdAnalysis)
    .Lookup(lookup => lookup
    .DataSource(ds => ds.WebApi().Controller("Resultadoes").LoadAction("AnalisissLookup").Key("Value"))
    .ValueExpr("Value")
    .DisplayExpr("Text")).GroupIndex(0).Caption("Análisis");

    columns.AddFor(m => m.NameComponent).Caption("Componente").AllowEditing(false);
    columns.AddFor(m => m.ResultNumber).Caption("Valor");
    columns.AddFor(m => m.IdUnidad).Lookup(lookup => lookup
    .DataSource(ds => ds.WebApi().Controller("Resultadoes").LoadAction("UnidadesStringLookup").Key("Value"))
    .ValueExpr("Value")
    .DisplayExpr("Text")
    ).Caption("Unidad").AllowEditing(false);

    })
    .ShowBorders(true)
    .AllowColumnReordering(true)
    .RowAlternationEnabled(false)
    .ShowColumnLines(true)
    .Grouping(g => g.AutoExpandAll(true))
    .ShowRowLines(true)
    .Paging(paging => paging.PageSize(20))
    .FilterRow(f => f.Visible(true))
    .Pager(pager => {
    pager.ShowPageSizeSelector(true);
    pager.AllowedPageSizes(new[] { 20, 50, 100 });
    pager.ShowInfo(true);
    })
    .SearchPanel(s => s
    .Visible(true)
    .HighlightCaseSensitive(true)
    )
    .Editing(editing => {
        editing.Mode(GridEditMode.Batch);
        editing.AllowUpdating(true);
        editing.SelectTextOnEditStart(true);
        editing.StartEditAction(GridStartEditAction.Click);
    })
    )
</text>);
      })
)
 
 

<script>

    

</script>